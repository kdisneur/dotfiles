#!/usr/bin/env bash
#
# | 180â€“300 | Ideal HiDPI                    |
# https://github.com/cassidyjames/dippi/blob/main/dpi.md#desktops
DPI=162
xrandr --dpi "$DPI"
echo "Xft.dpi: $DPI" | xrdb -merge
mkdir -p "${XDG_CONFIG_HOME:-$HOME/.config}/fontconfig/conf.d"
cat > "${XDG_CONFIG_HOME:-$HOME/.config}/fontconfig/conf.d/90-xrandr-sync-dpi.conf" << EOF
<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<!-- Generated by autorandr postswitch script, do not edit. -->
<fontconfig>
  <match target="pattern">
    <edit name="dpi" mode="assign"><double>$DPI</double></edit>
  </match>
</fontconfig>
EOF

i3-msg restart
